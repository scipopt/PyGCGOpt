<!doctype html>
<html class="no-js" lang="en" data-content_root="../../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../../genindex.html" /><link rel="search" title="Search" href="../../search.html" /><link rel="next" title="Exploring DW Dual Bounds" href="../alldecomps/alldecomps.html" /><link rel="prev" title="Examples" href="../index.html" />

    <link rel="shortcut icon" href="../../_static/favicon.ico"/><!-- Generated with Sphinx 8.1.3 and Furo 2024.08.06 -->
        <title>Decomposing the Capacitated p-Median Problem - PyGCGOpt 0.4.1</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/nbsphinx-code-cells.css?v=2aa19091" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo-extensions.css?v=302659d7" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../index.html"><div class="brand">PyGCGOpt 0.4.1</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../../index.html">
  
  
  <span class="sidebar-brand-text">PyGCGOpt 0.4.1</span>
  
</a><form class="sidebar-search-container" method="get" action="../../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../index.html">PyGCGOpt</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../INSTALL.html">Installation</a></li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="../index.html">Examples</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of Examples</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">Decomposing the Capacitated p-Median Problem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../alldecomps/alldecomps.html">Exploring DW Dual Bounds</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../api/index.html">API Reference</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of API Reference</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../api/model.html">Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/classifier.html">Classifier</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/decomposition.html">Decomposition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/detprobdata.html">DetProbData</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/detector.html">Detector</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/partition.html">Partition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/pricingsolver.html">PricingSolver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/score.html">Score</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">About the project</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../CHANGELOG.html">CHANGELOG</a></li>
<li class="toctree-l1"><a class="reference external" href="https://gcg.or.rwth-aachen.de/doc-preview/doc-3.1.0/index.html">GCG Documentation</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/scipopt/PyGCGOpt">GitHub repo</a></li>
<li class="toctree-l1"><a class="reference external" href="https://www.scipopt.org/doc-8.0.0/html/">SCIP Documentation</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/scipopt/PySCIPOpt">PySCIPOpt repo</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="../../_sources/examples/cpmp/cpmp.ipynb.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="Decomposing-the-Capacitated-p-Median-Problem">
<h1>Decomposing the Capacitated p-Median Problem<a class="headerlink" href="#Decomposing-the-Capacitated-p-Median-Problem" title="Link to this heading">¶</a></h1>
<p>The capacitated p-median problem (CPMP) is a known and well-studied problem from the literature. Given <span class="math notranslate nohighlight">\(n \in \mathbb{N}\)</span> locations, the task is to select <span class="math notranslate nohighlight">\(p \in \mathbb{N}\)</span> <em>median</em> locations with <span class="math notranslate nohighlight">\(p \leq n\)</span> and to assign each location to exactly one median. For any two locations <span class="math notranslate nohighlight">\(i,j \in [n]\)</span>, the distance between them is given by <span class="math notranslate nohighlight">\(d_{ij} \in \mathbb{R}\)</span>. The distance between the locations and their assigned medians is minimized. Every location <span class="math notranslate nohighlight">\(i \in [n]\)</span>
has a <em>demand</em> <span class="math notranslate nohighlight">\(q_i \in \mathbb{R}\)</span> and a maximum <em>capacity</em> <span class="math notranslate nohighlight">\(Q_i \in \mathbb{R}\)</span>. For every selected median, the sum of the demands of the locations assigned to it must not exceed its capacity.</p>
<p>The CPMP can be formulated as a MIP. Here is a classical compact formulation of problem:</p>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[\begin{split}\begin{alignat*}{3}
z^{\star}_{IP}\,\,\,=\,\,\,\min{} &amp;\sum_{i=1}^n \sum_{j=1}^n d_{ij} x_{ij} \hspace{-2em} &amp;&amp;&amp;&amp;\\
                     \text{s. t.} &amp;\sum_{j=1}^n  x_{ij} &amp;&amp;= 1 \quad &amp;\forall i &amp;\in [n]\\
                                  &amp;\sum_{i=1}^{n} q_i x_{ij} &amp;&amp;\leq Q_j y_j \quad &amp;\forall j &amp;\in [n] \\
                                  &amp;\sum_{j=1}^n  y_j &amp;&amp;= p &amp;&amp; \\
                                  &amp;x_{ij} \in \{0,1\}, y_j \in \{0,1\} \hspace{-6em} &amp;&amp;\hspace{6em}\quad&amp; \forall i,j &amp;\in [n].
\end{alignat*}\end{split}\]</div>
</div>
<p>There are different approaches to solve the CPMP. As it has a structure, we can try to solve using a Branch-Cut-and-Price approach. For that we want to use the <code class="docutils literal notranslate"><span class="pre">PyGCGOpt</span></code> interface to interact with GCG. We will consider three use-cases: (1) The Automatic Mode, (2) Exploring different Decompositions, and (3) Building a custom Decomposition.</p>
<p>To follow along with this tutorial interactively, please download the Jupyter notebook from the <a class="reference external" href="https://github.com/scipopt/PyGCGOpt/tree/master/examples/cpmp">examples folder</a>.</p>
<section id="Reading-in-the-Instance">
<h2>Reading in the Instance<a class="headerlink" href="#Reading-in-the-Instance" title="Link to this heading">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">PyGCGOpt</span></code> interface offers two methods to specify a problem. The first is to load the model from a standardized file format (e.g., <code class="docutils literal notranslate"><span class="pre">.lp</span></code> or <code class="docutils literal notranslate"><span class="pre">.mps</span></code>) that is supported by <code class="docutils literal notranslate"><span class="pre">SCIP</span></code> using <code class="docutils literal notranslate"><span class="pre">Model.readProb()</span></code>. Optionally, one can also read in a decomposition from a <code class="docutils literal notranslate"><span class="pre">.dec</span></code> file in the same manner. In this example, we will use the second method: Modeling a problem directly in Python.</p>
<p>Execute the following cell which includes a trivial test instance and function to load more instances from a custom <code class="docutils literal notranslate"><span class="pre">JSON</span></code> file format.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">json</span>

<span class="k">def</span><span class="w"> </span><span class="nf">get_simple_instance</span><span class="p">():</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">5</span>
    <span class="n">p</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span> <span class="mi">46</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="mi">43</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span> <span class="mi">30</span><span class="p">},</span> <span class="mi">1</span><span class="p">:</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span> <span class="mi">22</span><span class="p">},</span> <span class="mi">2</span><span class="p">:</span> <span class="p">{</span><span class="mi">2</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span> <span class="mi">40</span><span class="p">},</span> <span class="mi">3</span><span class="p">:</span> <span class="p">{</span><span class="mi">3</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span> <span class="mi">22</span><span class="p">},</span> <span class="mi">4</span><span class="p">:</span> <span class="p">{</span><span class="mi">4</span><span class="p">:</span> <span class="mi">0</span><span class="p">}}</span>
    <span class="n">q</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span> <span class="mi">6</span><span class="p">}</span>
    <span class="n">Q</span> <span class="o">=</span> <span class="p">{</span><span class="n">i</span><span class="p">:</span> <span class="mi">33</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)}</span>
    <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">q</span><span class="p">,</span> <span class="n">Q</span>

<span class="k">def</span><span class="w"> </span><span class="nf">read_instance_json</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">instance</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
    <span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="nb">int</span><span class="p">(</span><span class="n">k</span><span class="p">):</span> <span class="p">{</span><span class="nb">int</span><span class="p">(</span><span class="n">kk</span><span class="p">):</span> <span class="n">vv</span> <span class="k">for</span> <span class="n">kk</span><span class="p">,</span> <span class="n">vv</span> <span class="ow">in</span> <span class="n">v</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">instance</span><span class="p">[</span><span class="s2">&quot;d&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>
    <span class="n">q</span> <span class="o">=</span> <span class="p">{</span><span class="nb">int</span><span class="p">(</span><span class="n">k</span><span class="p">):</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">instance</span><span class="p">[</span><span class="s2">&quot;q&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>
    <span class="n">Q</span> <span class="o">=</span> <span class="p">{</span><span class="nb">int</span><span class="p">(</span><span class="n">k</span><span class="p">):</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">instance</span><span class="p">[</span><span class="s2">&quot;Q&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>
    <span class="k">return</span> <span class="n">instance</span><span class="p">[</span><span class="s2">&quot;n&quot;</span><span class="p">],</span> <span class="n">instance</span><span class="p">[</span><span class="s2">&quot;p&quot;</span><span class="p">],</span> <span class="n">d</span><span class="p">,</span> <span class="n">q</span><span class="p">,</span> <span class="n">Q</span>

<span class="n">n_locations</span><span class="p">,</span> <span class="n">n_clusters</span><span class="p">,</span> <span class="n">distances</span><span class="p">,</span> <span class="n">demands</span><span class="p">,</span> <span class="n">capacities</span> <span class="o">=</span> <span class="n">read_instance_json</span><span class="p">(</span><span class="s2">&quot;instances/p550-01.json&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</section>
<section id="Setting-up-the-Model">
<h2>Setting up the Model<a class="headerlink" href="#Setting-up-the-Model" title="Link to this heading">¶</a></h2>
<p>Now, we want to build the model based on the above formulation. Please note that this part is <em>not</em> specific to GCG but is identical to how one would build the same model with <code class="docutils literal notranslate"><span class="pre">PySCIPOpt</span></code>. In technical terms, <code class="docutils literal notranslate"><span class="pre">Model</span></code> in <code class="docutils literal notranslate"><span class="pre">PyGCGOpt</span></code> is a subclass of <code class="docutils literal notranslate"><span class="pre">Model</span></code> in <code class="docutils literal notranslate"><span class="pre">PySCIPOpt</span></code> and, therefore, you can use all methods of <code class="docutils literal notranslate"><span class="pre">PySCIPOpt</span></code> <code class="docutils literal notranslate"><span class="pre">Model</span></code> to build your problem.</p>
<p>In order to recreate the model multiple times during this example, we create a method that will return the model. The method also returns the different constraints added to the model grouped by type. This will be important later in use-case 3.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">pygcgopt</span><span class="w"> </span><span class="kn">import</span> <span class="n">Model</span><span class="p">,</span> <span class="n">quicksum</span>

<span class="k">def</span><span class="w"> </span><span class="nf">build_model</span><span class="p">(</span><span class="n">n_locations</span><span class="p">,</span> <span class="n">n_clusters</span><span class="p">,</span> <span class="n">distances</span><span class="p">,</span> <span class="n">demands</span><span class="p">,</span> <span class="n">capacities</span><span class="p">):</span>
    <span class="n">m</span> <span class="o">=</span> <span class="n">Model</span><span class="p">()</span>

    <span class="n">m</span><span class="o">.</span><span class="n">printVersion</span><span class="p">()</span>
    <span class="n">m</span><span class="o">.</span><span class="n">redirectOutput</span><span class="p">()</span>

    <span class="n">m</span><span class="o">.</span><span class="n">setMinimize</span><span class="p">()</span>

    <span class="n">x</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">y</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_locations</span><span class="p">):</span>
        <span class="n">y</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">addVar</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;y_</span><span class="si">{</span><span class="n">j</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">vtype</span><span class="o">=</span><span class="s2">&quot;B&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_locations</span><span class="p">):</span>
            <span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">addVar</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;x_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">j</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">vtype</span><span class="o">=</span><span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="n">obj</span><span class="o">=</span><span class="n">distances</span><span class="p">[</span><span class="nb">min</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)][</span><span class="nb">max</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)])</span>

    <span class="c1"># Hold different constraint types</span>
    <span class="n">conss_assignment</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">conss_capacity</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">cons_pmedian</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="c1"># Create the assignment constraints</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_locations</span><span class="p">):</span>
        <span class="n">conss_assignment</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="n">m</span><span class="o">.</span><span class="n">addCons</span><span class="p">(</span><span class="n">quicksum</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_locations</span><span class="p">))</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>
        <span class="p">)</span>

    <span class="c1"># Create the capacity constraints</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_locations</span><span class="p">):</span>
        <span class="n">conss_capacity</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="n">m</span><span class="o">.</span><span class="n">addCons</span><span class="p">(</span><span class="n">quicksum</span><span class="p">(</span><span class="n">demands</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_locations</span><span class="p">))</span> <span class="o">&lt;=</span> <span class="n">capacities</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">*</span> <span class="n">y</span><span class="p">[</span><span class="n">j</span><span class="p">])</span>
        <span class="p">)</span>

    <span class="c1"># Create the p-median constraint</span>
    <span class="n">cons_pmedian</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">addCons</span><span class="p">(</span><span class="n">quicksum</span><span class="p">(</span><span class="n">y</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_locations</span><span class="p">))</span> <span class="o">==</span> <span class="n">n_clusters</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">m</span><span class="p">,</span> <span class="n">conss_assignment</span><span class="p">,</span> <span class="n">conss_capacity</span><span class="p">,</span> <span class="n">cons_pmedian</span>
</pre></div>
</div>
</div>
</section>
<section id="Use-Case-1:-The-Automatic-Mode">
<h2>Use-Case 1: The Automatic Mode<a class="headerlink" href="#Use-Case-1:-The-Automatic-Mode" title="Link to this heading">¶</a></h2>
<p>With the model built, we can now simply call the <code class="docutils literal notranslate"><span class="pre">optimize()</span></code> function and let GCG do its magic.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">m</span><span class="p">,</span> <span class="o">*</span><span class="n">conss</span> <span class="o">=</span> <span class="n">build_model</span><span class="p">(</span><span class="n">n_locations</span><span class="p">,</span> <span class="n">n_clusters</span><span class="p">,</span> <span class="n">distances</span><span class="p">,</span> <span class="n">demands</span><span class="p">,</span> <span class="n">capacities</span><span class="p">)</span>
<span class="n">m</span><span class="o">.</span><span class="n">optimize</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
GCG version 3.5.0 [GitHash: 202908425-dirty]
Copyright (C) 2010-2021 Operations Research, RWTH Aachen University
                        Konrad-Zuse-Zentrum fuer Informationstechnik Berlin (ZIB)

SCIP version 8.0.0 [precision: 8 byte] [memory: block] [mode: optimized] [LP solver: SoPlex 6.0.0] [GitHash: 8441670cd5-dirty]
Copyright (C) 2002-2021 Konrad-Zuse-Zentrum fuer Informationstechnik Berlin (ZIB)
presolving:
(round 1, exhaustive) 0 del vars, 0 del conss, 0 add conss, 0 chg bounds, 0 chg sides, 0 chg coeffs, 100 upgd conss, 0 impls, 50 clqs
   (0.0s) probing: 51/2550 (2.0%) - 0 fixings, 0 aggregations, 0 implications, 0 bound changes
   (0.0s) probing aborted: 50/50 successive totally useless probings
presolving (2 rounds: 2 fast, 2 medium, 2 exhaustive):
 0 deleted vars, 0 deleted constraints, 0 added constraints, 0 tightened bounds, 0 added holes, 0 changed sides, 0 changed coefficients
 0 implications, 2550 cliques
presolved problem has 2550 variables (2550 bin, 0 int, 0 impl, 0 cont) and 101 constraints
     50 constraints of type &lt;knapsack&gt;
     50 constraints of type &lt;setppc&gt;
      1 constraints of type &lt;linear&gt;
transformed objective value is always integral (scale: 1)
Presolving Time: 0.04
 Consclassifier &#34;nonzeros&#34; yields a classification with 2  different constraint classes
 Consclassifier &#34;constypes&#34; yields a classification with 3 different constraint classes
 Consclassifier &#34;constypes according to miplib&#34; yields a classification with 3 different constraint classes
 Conspartition &#34;constypes according to miplib&#34; is not considered since it offers the same structure as &#34;constypes&#34; conspartition
 Consclassifier &#34;gamsdomain&#34; yields a classification with 1  different constraint classes
 Consclassifier &#34;gamssymbols&#34; yields a classification with 1  different constraint classes
 Conspartition &#34;gamssymbols&#34; is not considered since it offers the same structure as &#34;gamsdomain&#34; conspartition
 Varclassifier &#34;gamsdomain&#34; yields a classification with 1  different variable classes
 Varclassifier &#34;gamssymbols&#34; yields a classification with 1  different variable classes
 Varpartition &#34;gamssymbols&#34; is not considered since it offers the same structure as &#34;gamsdomain&#34;
 Varclassifier &#34;vartypes&#34; yields a classification with 1 different variable classes
 Varpartition &#34;vartypes&#34; is not considered since it offers the same structure as &#34;gamsdomain&#34;
 Varclassifier &#34;varobjvals&#34; yields a classification with 116 different variable classes
 Varclassifier &#34;varobjvalsigns&#34; yields a classification with 2 different variable classes
 the current varclass distribution includes 116 classes but only 18 are allowed for GCGconshdlrDecompCalcCandidatesNBlocks()
 in dec_consclass: there are 3 different constraint classes
  the current constraint classifier &#34;nonzeros&#34; consists of 2 different classes
  the current constraint classifier &#34;constypes&#34; consists of 3 different classes
  the current constraint classifier &#34;gamsdomain&#34; consists of 1 different classes
 dec_consclass found 11 new partialdecs
dec_densemasterconss found 1 new partialdec
dec_neighborhoodmaster found 1 new partialdec
 the current varclass distribution includes POSTPROCESSING of decompositions. Added 0 new decomps.
Found 11 finished decompositions.
Measured running time per detector:
Detector consclass                 worked on        7 finished decompositions and took a total time of      0.000
Detector neighborhoodmaster        worked on        1 finished decompositions and took a total time of      0.000
Detector connectedbase             worked on       10 finished decompositions and took a total time of      0.007
Detector varclass                  worked on        2 finished decompositions and took a total time of      0.001
Detection Time: 0.02

A Dantzig-Wolfe reformulation is applied to solve the original problem.
Chosen structure has 50 blocks and 51 linking constraints.
This decomposition has a maxwhite score of 0.485149.
Matrix has 50 blocks, using 50 pricing problems.

  time | 116 classes but only 9 are allowed for propagatePartialdec() of var class detector
node  | left  |SLP iter|MLP iter|LP it/n| mem |mdpt |ovars|mvars|ocons|mcons|mcuts|  dualbound   | primalbound  |  deg   |  gap
p  0.2s|     1 |     0 |      0 |      0 |     - |  34M|   0 |2550 |   0 | 101 |   0 |   0 | 0.000000e+00 | 2.711000e+03 |   --   |    Inf
p  0.2s|     1 |     0 |      0 |      0 |     - |  33M|   0 |2550 |   0 | 101 |   0 |   0 | 0.000000e+00 | 1.785000e+03 |   --   |    Inf
p  0.3s|     1 |     0 |      0 |      0 |     - |  33M|   0 |2550 |   0 | 101 |   0 |   0 | 0.000000e+00 | 1.102000e+03 |   --   |    Inf
   0.3s|     1 |     0 |      0 |      0 |     - |  33M|   0 |2550 |   0 | 101 |   0 |   0 | 0.000000e+00 | 1.102000e+03 |   --   |    Inf

 0.3s|
     1 |     0 |      0 |      0 |     - |  34M|   0 |2550 |  50 | 102 | 102 |   0 | 0.000000e+00 | 1.102000e+03 |   0.00%|    Inf    0.3s
|     1 |     0 |      0 |      0 |     - |  34M|   0 |2550 | 150 | 102 | 102 |   0 | 0.000000e+00 | 1.102000e+03 |   0.00%|    Inf
Starting reduced cost pricing...
   0.5s|     1 |     0 |   2081 |   2081 |     - |  41M|   0 |2550 |1699 | 102 | 102 |   0 | 7.050000e+02 | 1.102000e+03 |  36.95%|  56.31%
d  1.1s|     1 |     0 |   3055 |   3055 |     - |  57M|   0 |2550 |1749 | 102 | 102 |   0 | 7.050000e+02 | 1.016000e+03 |  36.95%|  44.11%
X  1.4s|     1 |     0 |   3055 |   3055 |     - |  57M|   0 |2550 |1799 | 102 | 102 |   0 | 7.050000e+02 | 7.730000e+02 |  36.95%|   9.65%
Y  1.5s|     1 |     0 |   3055 |   3055 |     - |  57M|   0 |2550 |1849 | 102 | 102 |   0 | 7.050000e+02 | 7.580000e+02 |  36.95%|   7.52%
   1.5s|     1 |     0 |   3055 |   3055 |     - |  57M|   0 |2550 |1849 | 102 | 102 |   0 | 7.050000e+02 | 7.580000e+02 |  36.95%|   7.52%
   1.6s|     1 |     0 |   3055 |   3055 |     - |  57M|   0 |2550 |1849 | 102 | 102 |   0 | 7.050000e+02 | 7.580000e+02 |  36.95%|   7.52%
   1.6s|     1 |     2 |   3055 |   3055 |     - |  57M|   0 |2550 |1849 | 102 | 102 |   0 | 7.050000e+02 | 7.580000e+02 |  36.95%|   7.52%
*r 1.6s|     2 |     1 |   3063 |   3063 | 316.0 |  58M|   1 |2550 |1849 | 102 | 102 |   0 | 7.050000e+02 | 7.140000e+02 |   --   |   1.28%
*r 2.3s|    16 |     5 |   6962 |   6962 | 281.0 |  61M|   5 |2550 |2305 | 102 | 102 |   0 | 7.102222e+02 | 7.130000e+02 |   --   |   0.39%

SCIP Status        : problem is solved [optimal solution found]
Solving Time (sec) : 2.62
Solving Nodes      : 21
Primal Bound       : +7.13000000000000e+02 (13 solutions)
Dual Bound         : +7.13000000000000e+02
Gap                : 0.00 %
</pre></div></div>
</div>
</section>
<section id="Use-Case-2:-Exploring-different-Decompositions">
<h2>Use-Case 2: Exploring different Decompositions<a class="headerlink" href="#Use-Case-2:-Exploring-different-Decompositions" title="Link to this heading">¶</a></h2>
<p>Above, we have seen GCG in its fully automatic mode. If we want to dig deeper, we can inspect the different decompositions that GCG detects. For that, we recreate the model and manually execute <code class="docutils literal notranslate"><span class="pre">presolve()</span></code> and <code class="docutils literal notranslate"><span class="pre">detect()</span></code> for the model. At this stage it is possible to list and visualize the found decompositions.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">m</span><span class="p">,</span> <span class="o">*</span><span class="n">conss</span> <span class="o">=</span> <span class="n">build_model</span><span class="p">(</span><span class="n">n_locations</span><span class="p">,</span> <span class="n">n_clusters</span><span class="p">,</span> <span class="n">distances</span><span class="p">,</span> <span class="n">demands</span><span class="p">,</span> <span class="n">capacities</span><span class="p">)</span>
<span class="n">m</span><span class="o">.</span><span class="n">presolve</span><span class="p">()</span>
<span class="n">m</span><span class="o">.</span><span class="n">detect</span><span class="p">()</span>

<span class="n">decomps</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">listDecompositions</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;GCG found </span><span class="si">{}</span><span class="s2"> finnished decompositions.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">decomps</span><span class="p">)))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
GCG version 3.5.0 [GitHash: 202908425-dirty]
Copyright (C) 2010-2021 Operations Research, RWTH Aachen University
                        Konrad-Zuse-Zentrum fuer Informationstechnik Berlin (ZIB)

SCIP version 8.0.0 [precision: 8 byte] [memory: block] [mode: optimized] [LP solver: SoPlex 6.0.0] [GitHash: 8441670cd5-dirty]
Copyright (C) 2002-2021 Konrad-Zuse-Zentrum fuer Informationstechnik Berlin (ZIB)
presolving:
(round 1, exhaustive) 0 del vars, 0 del conss, 0 add conss, 0 chg bounds, 0 chg sides, 0 chg coeffs, 100 upgd conss, 0 impls, 50 clqs
   (0.0s) probing: 51/2550 (2.0%) - 0 fixings, 0 aggregations, 0 implications, 0 bound changes
   (0.0s) probing aborted: 50/50 successive totally useless probings
presolving (2 rounds: 2 fast, 2 medium, 2 exhaustive):
 0 deleted vars, 0 deleted constraints, 0 added constraints, 0 tightened bounds, 0 added holes, 0 changed sides, 0 changed coefficients
 0 implications, 2550 cliques
presolved problem has 2550 variables (2550 bin, 0 int, 0 impl, 0 cont) and 101 constraints
     50 constraints of type &lt;knapsack&gt;
     50 constraints of type &lt;setppc&gt;
      1 constraints of type &lt;linear&gt;
transformed objective value is always integral (scale: 1)
Presolving Time: 0.04
starting detection
 Consclassifier &#34;nonzeros&#34; yields a classification with 2  different constraint classes
 Consclassifier &#34;constypes&#34; yields a classification with 3 different constraint classes
 Consclassifier &#34;constypes according to miplib&#34; yields a classification with 3 different constraint classes
 Conspartition &#34;constypes according to miplib&#34; is not considered since it offers the same structure as &#34;constypes&#34; conspartition
 Consclassifier &#34;gamsdomain&#34; yields a classification with 1  different constraint classes
 Consclassifier &#34;gamssymbols&#34; yields a classification with 1  different constraint classes
 Conspartition &#34;gamssymbols&#34; is not considered since it offers the same structure as &#34;gamsdomain&#34; conspartition
 Varclassifier &#34;gamsdomain&#34; yields a classification with 1  different variable classes
 Varclassifier &#34;gamssymbols&#34; yields a classification with 1  different variable classes
 Varpartition &#34;gamssymbols&#34; is not considered since it offers the same structure as &#34;gamsdomain&#34;
 Varclassifier &#34;vartypes&#34; yields a classification with 1 different variable classes
 Varpartition &#34;vartypes&#34; is not considered since it offers the same structure as &#34;gamsdomain&#34;
 Varclassifier &#34;varobjvals&#34; yields a classification with 116 different variable classes
 Varclassifier &#34;varobjvalsigns&#34; yields a classification with 2 different variable classes
 the current varclass distribution includes 116 classes but only 18 are allowed for GCGconshdlrDecompCalcCandidatesNBlocks()
 in dec_consclass: there are 3 different constraint classes
  the current constraint classifier &#34;nonzeros&#34; consists of 2 different classes
  the current constraint classifier &#34;constypes&#34; consists of 3 different classes
  the current constraint classifier &#34;gamsdomain&#34; consists of 1 different classes
 dec_consclass found 11 new partialdecs
dec_densemasterconss found 1 new partialdec
dec_neighborhoodmaster found 1 new partialdec
POSTPROCESSING of decompositions. Added 0 new decomps.
Found 11 finished decompositions.
Measured running time per detector:
Detector consclass                 worked on        7 finished decompositions and took a total time of      0.000
Detector neighborhoodmaster        worked on        1 finished decompositions and took a total time of      0.000
Detector connectedbase             worked on       10 finished decompositions and took a total time of      0.006
Detector varclass                  worked on        2 finished decompositions and took a total time of      0.001
Detection Time: 0.02
GCG found 11 finnished decompositions.
 the current varclass distribution includes 116 classes but only 9 are allowed for propagatePartialdec() of var class detector
</pre></div></div>
</div>
<section id="Inspecting-Decompositions">
<h3>Inspecting Decompositions<a class="headerlink" href="#Inspecting-Decompositions" title="Link to this heading">¶</a></h3>
<p>The call to <code class="docutils literal notranslate"><span class="pre">listDecompositions()</span></code> returns a list of <code class="docutils literal notranslate"><span class="pre">PartialDecomposition</span></code> objects. We can print a decomposition using the Python <code class="docutils literal notranslate"><span class="pre">print()</span></code> function to get a summary or access different fields directly.</p>
<p>For a full overview of available methods, take a look at the online documentation for the <code class="docutils literal notranslate"><span class="pre">PartialDecomposition</span></code> class, or execute <code class="docutils literal notranslate"><span class="pre">help(d)</span></code> where <code class="docutils literal notranslate"><span class="pre">d</span></code> is a decomposition object.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">decomps</span><span class="p">)</span>

<span class="n">d</span> <span class="o">=</span> <span class="n">decomps</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>

<span class="nb">print</span><span class="p">(</span>
    <span class="sa">f</span><span class="s2">&quot;Decomp scores: </span><span class="si">{</span><span class="n">d</span><span class="o">.</span><span class="n">classicScore</span><span class="si">=:</span><span class="s2">.04f</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">d</span><span class="o">.</span><span class="n">borderAreaScore</span><span class="si">=:</span><span class="s2">.04f</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">d</span><span class="o">.</span><span class="n">maxWhiteScore</span><span class="si">=:</span><span class="s2">.04f</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">d</span><span class="o">.</span><span class="n">maxForWhiteScore</span><span class="si">=:</span><span class="s2">.04f</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[&lt;PartialDecomposition: nBlocks=0, nMasterConss=101, nMasterVars=2550, nLinkingVars=0, maxForWhiteScore=0.0&gt;, &lt;PartialDecomposition: nBlocks=1, nMasterConss=0, nMasterVars=0, nLinkingVars=0, maxForWhiteScore=0.0&gt;, &lt;PartialDecomposition: nBlocks=50, nMasterConss=51, nMasterVars=0, nLinkingVars=0, maxForWhiteScore=0.48514851485148514&gt;, &lt;PartialDecomposition: nBlocks=51, nMasterConss=50, nMasterVars=0, nLinkingVars=0, maxForWhiteScore=0.49504950495049505&gt;, &lt;PartialDecomposition: nBlocks=1, nMasterConss=50, nMasterVars=0, nLinkingVars=0, maxForWhiteScore=0.0&gt;, &lt;PartialDecomposition: nBlocks=1, nMasterConss=100, nMasterVars=2500, nLinkingVars=0, maxForWhiteScore=0.009706853038245034&gt;, &lt;PartialDecomposition: nBlocks=1, nMasterConss=1, nMasterVars=0, nLinkingVars=0, maxForWhiteScore=0.0&gt;, &lt;PartialDecomposition: nBlocks=50, nMasterConss=51, nMasterVars=50, nLinkingVars=0, maxForWhiteScore=0.4853426519122501&gt;, &lt;PartialDecomposition: nBlocks=1, nMasterConss=1, nMasterVars=0, nLinkingVars=0, maxForWhiteScore=0.0&gt;, &lt;PartialDecomposition: nBlocks=101, nMasterConss=0, nMasterVars=0, nLinkingVars=2550, maxForWhiteScore=0.019291161956034086&gt;, &lt;PartialDecomposition: nBlocks=0, nMasterConss=101, nMasterVars=100, nLinkingVars=2450, maxForWhiteScore=0.0&gt;]
Decomp scores: d.classicScore=-1.0000, d.borderAreaScore=-1.0000, d.maxWhiteScore=0.4851, d.maxForWhiteScore=0.4851
</pre></div></div>
</div>
</section>
<section id="Visualizing-Decompositions">
<h3>Visualizing Decompositions<a class="headerlink" href="#Visualizing-Decompositions" title="Link to this heading">¶</a></h3>
<p>In addition, GCG can create graphical visualizations of decompositions. They can easily be displayed in a Jupyter nodebook like so:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">d</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../../_images/examples_cpmp_cpmp_12_0.svg" src="../../_images/examples_cpmp_cpmp_12_0.svg" />
</div>
</div>
</section>
<section id="Selecting-Decompositions">
<h3>Selecting Decompositions<a class="headerlink" href="#Selecting-Decompositions" title="Link to this heading">¶</a></h3>
<p>After this investigation, we decide that we like this particular decomposition. The following code orders GCG to select our decomposition instead of an automatic one. Then, the optimization process is started.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">d</span><span class="o">.</span><span class="n">isSelected</span> <span class="o">=</span> <span class="kc">True</span>

<span class="n">m</span><span class="o">.</span><span class="n">optimize</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

A Dantzig-Wolfe reformulation is applied to solve the original problem.
Chosen structure has 50 blocks and 51 linking constraints.
This decomposition has a maxwhite score of 0.485149.
Matrix has 50 blocks, using 50 pricing problems.

  time | node  | left  |SLP iter|MLP iter|LP it/n| mem |mdpt |ovars|mvars|ocons|mcons|mcuts|  dualbound   | primalbound  |  deg   |  gap
p  0.2s|     1 |     0 |      0 |      0 |     - |  34M|   0 |2550 |   0 | 101 |   0 |   0 | 0.000000e+00 | 2.711000e+03 |   --   |    Inf
p  0.2s|     1 |     0 |      0 |      0 |     - |  33M|   0 |2550 |   0 | 101 |   0 |   0 | 0.000000e+00 | 1.785000e+03 |   --   |    Inf
p  0.3s|     1 |     0 |      0 |      0 |     - |  33M|   0 |2550 |   0 | 101 |   0 |   0 | 0.000000e+00 | 1.102000e+03 |   --   |    Inf
   0.3s|     1 |     0 |      0 |      0 |     - |  33M|   0 |2550 |   0 | 101 |   0 |   0 | 0.000000e+00 | 1.102000e+03 |   --   |    Inf

 0.3s|     1 |     0 |      0 |      0 |     - |  34M|   0 |2550 |  50 | 102 | 102 |   0 | 0.000000e+00 | 1.102000e+03 |   0.00%|    Inf    0.3s|     1 |     0 |      0 |      0 |     - |  34M|   0 |2550 | 150 | 102 | 102 |   0 | 0.000000e+00 | 1.102000e+03 |   0.00%|    Inf


Starting reduced cost pricing...
   0.5s|     1 |     0 |   2081 |   2081 |     - |  41M|   0 |2550 |1699 | 102 | 102 |   0 | 7.050000e+02 | 1.102000e+03 |  36.95%|  56.31%d  1.0s|     1 |     0 |   3055 |   3055 |     - |  57M|   0 |2550 |1749 | 102 | 102 |   0 | 7.050000e+02 | 1.016000e+03 |  36.95%|  44.11%
X  1.4s
|     1 |     0 |   3055 |   3055 |     - |  57M|   0 |2550 |1799 | 102 | 102 |   0 | 7.050000e+02 | 7.730000e+02 |  36.95%|   9.65%
Y  1.5s|     1 |     0 |   3055 |   3055 |     - |  57M|   0 |2550 |1849 | 102 | 102 |   0 | 7.050000e+02 | 7.580000e+02 |  36.95%|   7.52%
   1.5s|     1 |     0 |   3055 |   3055 |     - |  57M|   0 |2550 |1849 | 102 | 102 |   0 | 7.050000e+02 | 7.580000e+02 |  36.95%|   7.52%
   1.5s|     1 |     0 |   3055 |   3055 |     - |  57M|   0 |2550 |1849 | 102 | 102 |   0 | 7.050000e+02 | 7.580000e+02 |  36.95%|   7.52%
   1.5s|     1 |     2 |   3055 |   3055 |     - |  57M|   0 |2550 |1849 | 102 | 102 |   0 | 7.050000e+02 | 7.580000e+02 |  36.95%|   7.52%
*r 1.5s|     2 |     1 |   3063 |   3063 | 316.0 |  58M|   1 |2550 |1849 | 102 | 102 |   0 | 7.050000e+02 | 7.140000e+02 |   --   |   1.28%
*r 2.2s|    16 |     5 |   6962 |   6962 | 281.0 |  61M|   5 |2550 |2305 | 102 | 102 |   0 | 7.102222e+02 | 7.130000e+02 |   --   |   0.39%

SCIP Status        : problem is solved [optimal solution found]
Solving Time (sec) : 2.55
Solving Nodes      : 21
Primal Bound       : +7.13000000000000e+02 (13 solutions)
Dual Bound         : +7.13000000000000e+02
Gap                : 0.00 %
</pre></div></div>
</div>
</section>
</section>
<section id="Use-Case-3:-Building-a-custom-Decomposition">
<h2>Use-Case 3: Building a custom Decomposition<a class="headerlink" href="#Use-Case-3:-Building-a-custom-Decomposition" title="Link to this heading">¶</a></h2>
<p>In the previous use-cases we run GCG with automatically detected decompositions. This is useful if we do not know the exact structure of a model but still want to exploit GCG’s decomposition approach.</p>
<p>However, for our model we <em>do</em> know its structure. If you take another look at our <code class="docutils literal notranslate"><span class="pre">build_model()</span></code> method, you will notice that we store the created constraints in different variables based on their type. This is a typical approach when we want to specify a custom decomposition after building the model using the Python interface.</p>
<p>In the following code, we recreate our model and use the different constraint types fo select constraints for reformulation and constraints for the Dantzig-Wolfe master problem.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">m</span><span class="p">,</span> <span class="n">conss_assignment</span><span class="p">,</span> <span class="n">conss_capacity</span><span class="p">,</span> <span class="n">cons_pmedian</span> <span class="o">=</span> <span class="n">build_model</span><span class="p">(</span>
    <span class="n">n_locations</span><span class="p">,</span> <span class="n">n_clusters</span><span class="p">,</span> <span class="n">distances</span><span class="p">,</span> <span class="n">demands</span><span class="p">,</span> <span class="n">capacities</span>
<span class="p">)</span>

<span class="n">conss_master</span> <span class="o">=</span> <span class="n">conss_assignment</span> <span class="o">+</span> <span class="p">[</span><span class="n">cons_pmedian</span><span class="p">]</span>
<span class="n">conss_reform</span> <span class="o">=</span> <span class="n">conss_capacity</span>

<span class="n">pd</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">createPartialDecomposition</span><span class="p">()</span>
<span class="n">pd</span><span class="o">.</span><span class="n">fixConssToMaster</span><span class="p">(</span><span class="n">conss_master</span><span class="p">)</span>

<span class="k">for</span> <span class="n">block</span><span class="p">,</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">conss_reform</span><span class="p">):</span>
    <span class="n">pd</span><span class="o">.</span><span class="n">fixConsToBlock</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">block</span><span class="p">)</span>

<span class="n">m</span><span class="o">.</span><span class="n">addPreexistingPartialDecomposition</span><span class="p">(</span><span class="n">pd</span><span class="p">)</span>

<span class="n">m</span><span class="o">.</span><span class="n">optimize</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
GCG version 3.5.0 [GitHash: 202908425-dirty]
Copyright (C) 2010-2021 Operations Research, RWTH Aachen University
                        Konrad-Zuse-Zentrum fuer Informationstechnik Berlin (ZIB)

SCIP version 8.0.0 [precision: 8 byte] [memory: block] [mode: optimized] [LP solver: SoPlex 6.0.0] [GitHash: 8441670cd5-dirty]
Copyright (C) 2002-2021 Konrad-Zuse-Zentrum fuer Informationstechnik Berlin (ZIB)
 added complete decomp for original problem with 50 blocks and 51 masterconss, 0 linkingvars, 0 mastervars, and max white score of   0.485149
there is an original decomposition and problem is not presolved yet -&gt; disable presolving and start optimizing (rerun with presolve command before detect command for detecting in presolved problem)
presolving:
presolving (0 rounds: 0 fast, 0 medium, 0 exhaustive):
 0 deleted vars, 0 deleted constraints, 0 added constraints, 0 tightened bounds, 0 added holes, 0 changed sides, 0 changed coefficients
 0 implications, 0 cliques
presolved problem has 2550 variables (2550 bin, 0 int, 0 impl, 0 cont) and 101 constraints
    101 constraints of type &lt;linear&gt;
transformed objective value is always integral (scale: 1)
Presolving Time: 0.00
 calculated translation; number of missing constraints: 0; number of other partialdecs: 1
Preexisting decomposition found. Solution process started...

A Dantzig-Wolfe reformulation is applied to solve the original problem.
Chosen structure has 50 blocks and 51 linking constraints.
This decomposition has a maxwhite score of 0.485149.
Matrix has 50 blocks, using 50 pricing problems.

  time | node  | left  |SLP iter|MLP iter|LP it/n| mem |mdpt |ovars|mvars|ocons|mcons|mcuts|  dualbound   | primalbound  |  deg   |  gap
p  0.1s|     1 |     0 |      0 |      0 |     - |  28M|   0 |2550 |   0 | 101 |   0 |   0 | 0.000000e+00 | 2.848000e+03 |   --   |    Inf
   0.1s|     1 |     0 |      0 |      0 |     - |  28M|   0 |2550 |   0 | 101 |   0 |   0 | 0.000000e+00 | 2.848000e+03 |   --   |    Inf

 0.1s|     1 |     0 |      0 |      0 |     - |  28M|
   0 |2550 |  50 | 102 | 102 |   0 | 0.000000e+00 | 2.848000e+03 |   0.00%|    Inf    0.1s|     1 |     0 |      0
|      0 |     - |  28M|   0 |2550 |  50 | 102 | 102 |   0 | 0.000000e+00 | 2.848000e+03 |   0.00%|    Inf    0.3s|     1 |     0 |   1839 |   1839 |     - |  38M|   0 |2550 |2302 | 102 | 102 |   0 | 0.000000e+00 | 2.848000e+03 |  49.42%|    Inf    0.6s|     1 |     0 |   3939 |   3939 |     - |  41M|   0 |2550 |2933 | 102 | 102 |   0 | 7.024809e+02 | 2.848000e+03 |  35.22%| 305.42%   0.6s|     1 |     0 |   3939 |   3939 |     - |  41M|   0 |2550 |2933 | 102 | 102 |   0 | 7.050000e+02 | 2.848000e+03 |  35.29%| 303.97%d  1.2s|     1 |     0 |   5187 |   5187
Starting reduced cost pricing...


|     - |  51M|   0 |2550 |2983 | 102 | 102 |   0 | 7.050000e+02 | 1.016000e+03 |  35.29%|  44.11%
X
  1.6s|     1 |     0 |   5187 |   5187 |     - |  51M|   0 |2550 |3033 | 102 | 102 |   0 | 7.050000e+02 | 8.040000e+02 |  35.29%|  14.04%
   1.7s|     1 |     0 |   5187 |   5187 |     - |  51M|   0 |2550 |3083 | 102 | 102 |   0 | 7.050000e+02 | 8.040000e+02 |  35.29%|  14.04%
   1.8s|     1 |     0 |   5187 |   5187 |     - |  51M|   0 |2550 |3083 | 102 | 102 |   0 | 7.050000e+02 | 8.040000e+02 |  35.29%|  14.04%
   1.8s|     1 |     2 |   5187 |   5187 |     - |  51M|   0 |2550 |3083 | 102 | 102 |   0 | 7.050000e+02 | 8.040000e+02 |  35.29%|  14.04%
c  2.1s|     5 |     6 |   6968 |   6968 | 585.0 |  53M|   2 |2550 |3315 | 102 | 102 |   0 | 7.093889e+02 | 7.350000e+02 |   --   |   3.61%
*r 2.3s|     7 |     4 |   7395 |   7395 | 461.2 |  54M|   2 |2550 |3362 | 102 | 102 |   0 | 7.093889e+02 | 7.190000e+02 |   --   |   1.35%
*r 2.3s|     7 |     2 |   7534 |   7534 | 484.3 |  54M|   2 |2550 |3469 | 102 | 102 |   0 | 7.093889e+02 | 7.130000e+02 |   --   |   0.51%

SCIP Status        : problem is solved [optimal solution found]
Solving Time (sec) : 2.54
Solving Nodes      : 9
Primal Bound       : +7.13000000000000e+02 (9 solutions)
Dual Bound         : +7.13000000000000e+02
Gap                : 0.00 %
</pre></div></div>
</div>
</section>
<section id="Summary">
<h2>Summary<a class="headerlink" href="#Summary" title="Link to this heading">¶</a></h2>
<p>With that, we have seen the most important features to use GCG as a solver through the Python interface. In a different example, we will take a look at how GCG can be extended using Python code.</p>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="../alldecomps/alldecomps.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Exploring DW Dual Bounds</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="../index.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Examples</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2021, Operations Research, RWTH Aachen University
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Decomposing the Capacitated p-Median Problem</a><ul>
<li><a class="reference internal" href="#Reading-in-the-Instance">Reading in the Instance</a></li>
<li><a class="reference internal" href="#Setting-up-the-Model">Setting up the Model</a></li>
<li><a class="reference internal" href="#Use-Case-1:-The-Automatic-Mode">Use-Case 1: The Automatic Mode</a></li>
<li><a class="reference internal" href="#Use-Case-2:-Exploring-different-Decompositions">Use-Case 2: Exploring different Decompositions</a><ul>
<li><a class="reference internal" href="#Inspecting-Decompositions">Inspecting Decompositions</a></li>
<li><a class="reference internal" href="#Visualizing-Decompositions">Visualizing Decompositions</a></li>
<li><a class="reference internal" href="#Selecting-Decompositions">Selecting Decompositions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#Use-Case-3:-Building-a-custom-Decomposition">Use-Case 3: Building a custom Decomposition</a></li>
<li><a class="reference internal" href="#Summary">Summary</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/scripts/furo.js?v=5fa4622c"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=f281be69"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    </body>
</html>